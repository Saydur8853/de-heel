{% extends 'base.html' %}

{% load static %}

{% block content %}

    </div>
  </div>
  <style>
    .spin-clockwise {
      animation: spin-clockwise 5s linear infinite;
      transform-origin: center;
    }
  
    .spin-counterclockwise {
      animation: spin-counterclockwise 5s linear infinite;
      transform-origin: center;
    }
  
    @keyframes spin-clockwise {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
  
    @keyframes spin-counterclockwise {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
  </style>

  <!-- appoinment  -->
  <style>
    /* General styling for the appointment section */
    .appointment-section {
      display: flex;
      flex-direction: column;
      background-color: #f0fdf4; /* Light green background */
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      max-width: 350px;
      margin: 20px auto;
      cursor: pointer; /* Make the div clickable */
    }

    .appointment-section:hover {
      background-color: #d1fae5; /* Slightly darker green on hover */
    }

    .appointment-section p {
      text-align: center;
      font-weight: 600;
      /*font-size: 1.1rem;*/
      color: #482d40; /* Darker text color */
      margin-bottom: 15px;
    }

    .appointment-section img {
      width: 80px;
      height: 80px;
      margin-top: 15px;
      margin-bottom: 15px;
      object-fit: cover;
      margin-left: auto;
      margin-right: auto;
    }

    /* Popup modal styling */
    .appointment-modal {
      display: none; /* Hidden by default */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5); /* Overlay background */
      justify-content: center;
      align-items: center;
    }

    .appointment-modal.active {
      display: flex; /* Show modal when active */
    }

    .modal-content {
      background-color: white;
      padding: 25px;
      border-radius: 8px;
      max-width: 400px;
      width: 100%;
    }

    .modal-content h2 {
      text-align: center;
      font-size: 1.25rem;
      margin-bottom: 20px;
    }

    .modal-content label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .modal-content input,
    .modal-content textarea,
    .modal-content select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 15px;
    }

    .modal-content button {
      width: 100%;
      padding: 12px;
      background-color: #38a169; /* Green button */
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
    }

    .modal-content button:hover {
      background-color: #2f855a;
    }

    .modal-content .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: transparent;
      border: none;
      font-size: 1.5rem;
      color: #2d3748;
      cursor: pointer;
    }

    .modal-content .close-btn:hover {
      color: #e53e3e;
    }
  </style>

    <!-- Banner -->
    <section
      class="relative bg-cover bg-center h-auto"
      style="background-image: url('{{ banner.image.url }}');"
    >
      <div class="absolute inset-0"></div>

      <div
        class="relative z-10 flex flex-col justify-start max-w-[1500px] mx-auto text-white h-full space-y-6 px-12 pb-8"
      >
        <h2 class="text-3xl md:text-5xl font-bold uppercase mt-[150px]">
          {{ banner.title }}
        </h2>
        <p class="max-w-3xl leading-loose text-lg md:text-base">
          {{ banner.subtitle }}
        </p>

        <div
          class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl w-full mt-6"
        >
        {% for conference in video_conferences %}
        <a href="{{ conference.url }}" target="_blank">
          <div class="flex flex-col h-[180px] md:h-[220px] mb-10 p-6 bg-black bg-opacity-60 border border-white rounded-lg shadow-lg shadow-white cursor-pointer">
            
            <!-- Text Container -->
            <div class="flex-1">
              <p class="text-white text-center line-clamp-3">{{ conference.title }}</p>
            </div>
      
            <!-- Icon Container -->
            <div class="flex justify-center mt-5">
              <svg width="89" height="85" viewBox="0 0 89 85" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-[80px] h-[80px]">
                <!-- First shape rotating clockwise -->
                <path class="spin-clockwise" d="M83.6649 37.1189C83.6649 55.0159 58.5511 84.2541 40.654 84.2541C22.757 84.2541 14.1405 62.0862 14.1405 44.1892C14.1405 26.2922 22.757 0 40.654 0C58.5511 0 83.6649 19.2219 83.6649 37.1189Z" fill="#59B55E" fill-opacity="0.5"/>
                <!-- Second shape rotating counterclockwise -->
                <path class="spin-counterclockwise" d="M37.0246 8.0767C54.876 6.79971 85.8315 29.7633 87.1085 47.6147C88.3854 65.4661 66.8889 75.6424 49.0375 76.9193C31.1861 78.1963 4.34613 71.4778 3.06915 53.6264C1.79216 35.775 19.1732 9.35368 37.0246 8.0767Z" fill="#59B55E" fill-opacity="0.5"/>
                <!-- Static video icon -->
                <path d="M29.2051 59.1338C29.0898 59.1344 28.9762 59.1067 28.8741 59.0532C28.7721 58.9998 28.6846 58.9221 28.6195 58.8271C28.5544 58.732 28.5135 58.6224 28.5005 58.508C28.4874 58.3935 28.5026 58.2775 28.5448 58.1703L31.1845 51.3052C29.4236 48.5696 28.4903 45.3837 28.4966 42.1304C28.4966 32.7545 36.124 25.1271 45.4999 25.1271C54.8759 25.1271 62.5033 32.7545 62.5033 42.1304C62.5033 51.5064 54.8759 59.1338 45.4999 59.1338C42.3203 59.1338 39.2243 58.2468 36.5264 56.5635L29.4431 59.0927C29.3668 59.1203 29.2862 59.1342 29.2051 59.1338ZM36.6157 55.0714C36.7517 55.0714 36.8863 55.1097 37.0025 55.1862C39.5281 56.8394 42.4814 57.7194 45.4999 57.7183C54.0937 57.7183 61.0864 50.7256 61.0864 42.1319C61.0864 33.5381 54.0937 26.5454 45.4999 26.5454C36.9062 26.5454 29.9135 33.5381 29.9135 42.1319C29.9135 45.2463 30.8289 48.2531 32.5632 50.8262C32.6922 51.0175 32.7191 51.2612 32.6369 51.4766L30.4208 57.2393L36.3776 55.1125C36.4541 55.0855 36.5346 55.0716 36.6157 55.0714Z" fill="black"/>
                <path d="M49.7508 50.6321C47.5248 50.6321 43.2512 47.9697 41.456 46.1744C39.6607 44.3777 36.9983 40.1042 36.9983 37.8796C36.9983 35.5898 38.9466 33.6288 40.5406 33.6288H41.9576C42.0897 33.6289 42.2192 33.666 42.3314 33.7359C42.4436 33.8057 42.534 33.9056 42.5924 34.0241C42.5938 34.0255 43.4468 35.7599 44.0051 36.8481C44.6342 38.0766 43.451 39.5219 42.778 40.2034C43.0189 40.8212 43.5814 42.0454 44.5832 43.0472C45.585 44.049 46.8092 44.613 47.427 44.8524C48.1071 44.178 49.5524 42.9934 50.7823 43.6253C51.8705 44.185 53.6035 45.0366 53.6049 45.0366C53.8486 45.1571 54.0016 45.4036 54.0016 45.6728V47.0898C54.0016 48.6853 52.0391 50.6321 49.7508 50.6321ZM40.5406 35.0457C39.7401 35.0457 38.4152 36.3706 38.4152 37.8796C38.4152 39.5219 40.7305 43.4426 42.4592 45.1712C44.348 47.06 48.2318 49.2152 49.7508 49.2152C51.2598 49.2152 52.5847 47.8903 52.5847 47.0898V46.1135C51.7651 45.7104 50.9484 45.3013 50.1348 44.8864C49.8032 44.7079 48.7958 45.4178 48.1567 46.1418C48.0677 46.2423 47.952 46.3154 47.8231 46.3528C47.6942 46.3902 47.5573 46.3902 47.4284 46.353C47.3391 46.3275 45.2406 45.7068 43.5814 44.0476C41.9221 42.3883 41.3029 40.2898 41.276 40.2006C41.2388 40.0716 41.2388 39.9348 41.2762 39.8059C41.3136 39.677 41.3867 39.5613 41.4871 39.4723C42.2098 38.8332 42.9154 37.83 42.7426 37.4928C42.3472 36.7234 41.8045 35.6267 41.5183 35.0457H40.5406Z" fill="black"/>
                
              </svg>
            </div>
            
          </div>
        </a>
      {% endfor %}
      


      
          <!-- Main Div -->
          <div class="flex flex-col h-[180px] md:h-[220px] mb-10 p-6 bg-black bg-opacity-60 border border-white rounded-lg shadow-lg shadow-white cursor-pointer" onclick="openAppointmentPopup()">
  
            <!-- Text Container -->
            <div class="flex-1">
              <p class="text-white text-center line-clamp-3">Fix an appointment with factory owner</p>
            </div>
            
            <!-- Icon Container -->
            <div class="flex justify-center mt-5">
              <svg width="89" height="85" viewBox="0 0 89 85" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-[80px] h-[80px]">
                <!-- First shape rotating clockwise -->
                <path class="spin-clockwise" d="M83.6649 37.1189C83.6649 55.0159 58.5511 84.2541 40.654 84.2541C22.757 84.2541 14.1405 62.0862 14.1405 44.1892C14.1405 26.2922 22.757 0 40.654 0C58.5511 0 83.6649 19.2219 83.6649 37.1189Z" fill="#59B55E" fill-opacity="0.5"/>
                <!-- Second shape rotating counterclockwise -->
                <path class="spin-counterclockwise" d="M37.0246 8.0767C54.876 6.79971 85.8315 29.7633 87.1085 47.6147C88.3854 65.4661 66.8889 75.6424 49.0375 76.9193C31.1861 78.1963 4.34613 71.4778 3.06915 53.6264C1.79216 35.775 19.1732 9.35368 37.0246 8.0767Z" fill="#59B55E" fill-opacity="0.5"/>
                <!-- Static phone icon -->
                <path d="M37.8333 25.4603V30.4603" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M51.1667 25.4603V30.4603" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M59.5 36.2937V44.8437C58.0167 43.6603 56.1333 42.9603 54.0833 42.9603C52.0333 42.9603 50.1167 43.6769 48.6167 44.8936C46.6 46.4769 45.3333 48.9603 45.3333 51.7103C45.3333 53.3437 45.8 54.9103 46.6 56.2103C47.2167 57.227 48.0167 58.1103 48.9667 58.7937H37.8333C32 58.7937 29.5 55.4603 29.5 50.4603V36.2937C29.5 31.2937 32 27.9603 37.8333 27.9603H51.1667C57 27.9603 59.5 31.2937 59.5 36.2937Z" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M36.1667 40.4603H46.1667" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M36.1667 48.7937H40.5333" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M62.8333 51.7103C62.8333 53.3437 62.3666 54.9103 61.5666 56.2103C61.1 57.0103 60.5167 57.7103 59.8333 58.277C58.3 59.6437 56.3 60.4603 54.0833 60.4603C52.1666 60.4603 50.4 59.8437 48.9666 58.7937C48.0166 58.1103 47.2167 57.227 46.6 56.2103C45.8 54.9103 45.3333 53.3437 45.3333 51.7103C45.3333 48.9603 46.6 46.4769 48.6166 44.8936C50.1166 43.6769 52.0333 42.9603 54.0833 42.9603C56.1333 42.9603 58.0166 43.6603 59.5 44.8437C61.5333 46.4437 62.8333 48.927 62.8333 51.7103Z" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M54.0834 55.877C54.0834 53.577 55.95 51.7104 58.25 51.7104C55.95 51.7104 54.0834 49.8437 54.0834 47.5437C54.0834 49.8437 52.2167 51.7104 49.9167 51.7104C52.2167 51.7104 54.0834 53.577 54.0834 55.877Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          
          </div>
          
          
          
          <!-- Call Button -->
          <!-- <a href="tel:{{ contact_us.phone_number }}">
            <div class="flex flex-col h-[180px] md:h-[220px] mb-7 p-6 bg-black bg-opacity-60 border border-white rounded-lg shadow-lg shadow-white cursor-pointer">
              
              <div class="flex-1">
                <p class="text-white text-center line-clamp-3">{{ contact_us.title }}</p>
              </div>

              <div class="flex justify-center mt-5">
                <svg width="89" height="85" viewBox="0 0 89 85" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-[80px] h-[80px]">
                  <path class="spin-clockwise" d="M83.6649 37.1189C83.6649 55.0159 58.5511 84.2541 40.654 84.2541C22.757 84.2541 14.1405 62.0862 14.1405 44.1892C14.1405 26.2922 22.757 0 40.654 0C58.5511 0 83.6649 19.2219 83.6649 37.1189Z" fill="#59B55E" fill-opacity="0.5"/>
                  <path class="spin-counterclockwise" d="M37.0246 8.0767C54.876 6.79971 85.8315 29.7633 87.1085 47.6147C88.3854 65.4661 66.8889 75.6424 49.0375 76.9193C31.1861 78.1963 4.34613 71.4778 3.06915 53.6264C1.79216 35.775 19.1732 9.35368 37.0246 8.0767Z" fill="#59B55E" fill-opacity="0.5"/>
                  <path d="M61.1167 53.05C61.1167 53.65 60.9833 54.2666 60.7 54.8666C60.4167 55.4666 60.05 56.0333 59.5667 56.5666C58.75 57.4666 57.85 58.1166 56.8333 58.5333C55.8333 58.95 54.75 59.1666 53.5833 59.1666C51.8833 59.1666 50.0667 58.7666 48.15 57.95C46.2333 57.1333 44.3167 56.0333 42.4167 54.65C40.5 53.25 38.6833 51.7 36.95 49.9833C35.2333 48.25 33.6833 46.4333 32.3 44.5333C30.9333 42.6333 29.8333 40.7333 29.0333 38.85C28.2333 36.95 27.8333 35.1333 27.8333 33.4C27.8333 32.2666 28.0333 31.1833 28.4333 30.1833C28.8333 29.1666 29.4667 28.2333 30.35 27.4C31.4167 26.35 32.5833 25.8333 33.8167 25.8333C34.2833 25.8333 34.75 25.9333 35.1667 26.1333C35.6 26.3333 35.9833 26.6333 36.2833 27.0666L40.15 32.5166C40.45 32.9333 40.6667 33.3166 40.8167 33.6833C40.9667 34.0333 41.05 34.3833 41.05 34.7C41.05 35.1 40.9333 35.5 40.7 35.8833C40.4833 36.2666 40.1667 36.6666 39.7667 37.0666L38.5 38.3833C38.3167 38.5666 38.2333 38.7833 38.2333 39.05C38.2333 39.1833 38.25 39.3 38.2833 39.4333C38.3333 39.5666 38.3833 39.6666 38.4167 39.7666C38.7167 40.3166 39.2333 41.0333 39.9667 41.9C40.7167 42.7666 41.5167 43.65 42.3833 44.5333C43.2833 45.4166 44.15 46.2333 45.0333 46.9833C45.9 47.7166 46.6167 48.2166 47.1833 48.5166C47.2667 48.55 47.3667 48.6 47.4833 48.65C47.6167 48.7 47.75 48.7166 47.9 48.7166C48.1833 48.7166 48.4 48.6166 48.5833 48.4333L49.85 47.1833C50.2667 46.7666 50.6667 46.45 51.05 46.25C51.4333 46.0166 51.8167 45.9 52.2333 45.9C52.55 45.9 52.8833 45.9666 53.25 46.1166C53.6167 46.2666 54 46.4833 54.4167 46.7666L59.9333 50.6833C60.3667 50.9833 60.6667 51.3333 60.85 51.75C61.0167 52.1666 61.1167 52.5833 61.1167 53.05Z" stroke="black" stroke-width="1.5" stroke-miterlimit="10"/>
                </svg>
              </div>
              
            </div>
          </a> -->

          

          <!-- Popup -->
          <div
            id="appointment-popup"
            class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
            onclick="closeAppointmentPopup(event)"
          >
            <div
              class="bg-white mt-6 p-6 rounded-lg shadow-lg w-10/12 max-w-sm"
              onclick="event.stopPropagation()"
            >
              <form method="POST" action="{% url 'submit_appointment' %}">
                <h2 class="text-black text-lg font-semibold mb-3">
                  Get your Appointment
                </h2>
                {% csrf_token %}
                <div class="mb-3">
                  <label for="name" class="block text-gray-700 text-sm"
                    >Name</label
                  >
                  <input
                    type="text"
                    id="name"
                    name="name"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="calendar" class="block text-gray-700 text-sm"
                    >Date and Time</label
                  >
                  <input
                    type="datetime-local"
                    id="calendar"
                    name="calendar"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                    required
                    min=""
                  />
                </div>
                <script>
                  // Set the min date for the datetime-local input to the current date and time
                  document.addEventListener("DOMContentLoaded", function () {
                    const calendarInput = document.getElementById("calendar");
                    const now = new Date();
                    const currentDateTime = now.toISOString().slice(0, 16); // Format: 'YYYY-MM-DDTHH:MM'
                    calendarInput.min = currentDateTime;
                  });
                </script>
                <div class="mb-3">
                  <label for="phone_number" class="block text-gray-700 text-sm"
                    >Phone Number</label
                  >
                  <input
                    type="tel"
                    id="phone_number"
                    name="phone_number"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="email" class="block text-gray-700 text-sm"
                    >Email (optional)</label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                  />
                </div>
                <div class="mb-3">
                  <label for="short_message" class="block text-gray-700 text-sm"
                    >Short Message</label
                  >
                  <textarea
                    id="short_message"
                    name="short_message"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                  ></textarea>
                </div>
                <div class="flex justify-between mt-4">
                  <!-- Cancel Button -->
                  <button
                    type="button"
                    onclick="closeAppointmentPopup()"
                    class="bg-red-500 text-white px-3 py-2 rounded text-sm"
                  >
                    Cancel
                  </button>
                  <!-- Submit Button -->
                  <button
                    type="submit"
                    class="bg-green-500 text-white px-3 py-2 rounded text-sm"
                  >
                    Submit
                  </button>
                </div>
              </form>
            </div>
          </div>
          <!-- Popup -->
          <script>
            function openAppointmentPopup() {
              document
                .getElementById("appointment-popup")
                .classList.remove("hidden");
            }

            function closeAppointmentPopup(event) {
              const popup = document.getElementById("appointment-popup");
              // Only close if clicked outside the popup content or on the cancel button
              if (!event || event.target === popup) {
                popup.classList.add("hidden");
              }
            }
          </script>
        </div>
      </div>
    </section>

    <main class="mx-4 md:mx-auto my-20 md:my-16 md:my[100px]">
      <!-- Category -->
      <div class="max-w-[1200px] mx-auto justify-center items-center">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center mb-[24px]">
          Our Products
        </h1>
        
        
      
        {% for category_level1 in category_level1_list %}
        <p
          class="text-3xl mb-10 cursor-pointer capitalize"
          onclick="toggleCategoryLevel2('{{ category_level1.id }}')"
        >
          {{ category_level1.name }} <i class="ml-5 fa fa-chevron-down"></i>
        </p>
      
        <div id="category-level2-{{ category_level1.id }}" class="category-level2 mb-[100px]">
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for category_level2 in category_level1.level2_categories.all %}
            <a href="{% url 'product' %}?category_level2={{ category_level2.id }}" class="block">
              <div
                class="flex flex-col items-center bg-gray-50 rounded-lg shadow-lg overflow-hidden transition-transform transform hover:scale-105 hover:shadow-xl"
              >
                <img
                  src="{{ category_level2.image.url }}"
                  alt="{{ category_level2.name }}"
                  class="w-full h-52 object-cover rounded-t-md transition-transform duration-300 transform hover:scale-110"
                />
                <div class="grid grid-cols-10 w-full relative z-10">
                  <div class="col-span-8 flex p-5">
                    <p class="text-center text-3xl font-semibold text-gray-800 capitalize">
                      {{ category_level2.name }}
                    </p>
                  </div>
                  <div class="col-span-2 flex items-center justify-center">
                    <span class="brand-bg text-white px-3 py-2 rounded">
                      <i class="fa-solid text-center fa-arrow-right"></i>
                    </span>
                  </div>
                </div>
              </div>
            </a>
            
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
      
      <script>
        function toggleCategoryLevel2(categoryId) {
          var categoryDiv = document.getElementById("category-level2-" + categoryId);
          categoryDiv.classList.toggle("hidden");
        }
      </script>
      

      <!-- Latest Product -->

      <div class="py-10 max-w-[1200px] mx-auto">
        <h2 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center mb-[48px]">
          Latest Product
        </h2>
        

        <div
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
        >
          {% for product in latest_products %}
          <a href="{% url 'product_details' product.id %}">
            <div
            class="rounded-lg shadow-lg overflow-hidden transition-transform transform hover:scale-105 hover:shadow-xl"
          >
            <div class="relative border-b border-gray-200">
              <img
                src="{{ product.image.url }}"
                alt="{{ product.name }}"
                class="w-full h-[350px] object-cover"
              />
              {% if product.minimum_order_quantity %}
              <span
                class="absolute top-2 right-2 bg-green-500 text-white text-xs px-4 py-1 rounded-full"
                >MOQ: {{ product.minimum_order_quantity }}</span
              >
              {% endif %}
            </div>
            <div class="p-4">
              <h3 class="text-lg font-semibold capitalize pb-2">
                {{ product.name }}
              </h3>
              <div class="flex justify-between items-center relative">
                <p class="text-gray-600 text-sm capitalize">
                  {{ product.description|truncatewords:3 }}
                </p>
                <p class="text-green-500 text-xl font-medium">
                  ${{ product.price }}
                </p>
                <button class="text-green-500 absolute top-[-60px] right-0">
                  <i
                    class="fa-solid fa-cubes border-4 relative border-white bg-[#D3E6D8] rounded-full p-3"
                  ></i>
                  <span
                    class="absolute right-1 bg-red-700 rounded-full text-sm text-white px-1"
                    >{{ product.stock }}</span
                  >
                </button>
              </div>
            </div>
          </div>
          </a>
          {% endfor %}
        </div>
      </div>

      <!-- About Us Section -->
      <div class="my-16 md:my-[100px] max-w-[1200px] mx-auto" id="about">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
            <div>
                <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center mt-5 font-bold mb-[12px]">
                    About Us
                </h1>
                
                <p class="leading-loose text-center">
                    {{ about_data.description }}
                </p>
    
                <a href="{% url 'about' %}" class="hover:text-gray-300">
                    <button class="mx-auto text-white flex bg-[#59B55E] px-5 py-2 rounded-lg mt-5">
                        Read More <i class="fa-solid ml-5 my-auto fa-arrow-right"></i>
                    </button>
                </a>
            </div>
    
            <div>
                {% if about_data.image %}
                    <img src="{{ about_data.image.url }}" class="mx-auto" />
                {% endif %}
            </div>
        </div>
    </div>
    

      <!-- Strength -->

      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="strength">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center">
          Our Strength
        </h1>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-10 py-10">
          {% for strength in strengths %}
          <div
            class="border rounded-lg border-[#59B55E] shadow-lg shadow-black/20 hover:shadow-black/50 hover:shadow-xl"
          >
            <img
              src="{{ strength.image.url }}"
              class="mx-auto w-[90px] h-[80px] mt-[70px]"
              alt="vector"
            />
            <h1 class="text-center font-bold mt-4 text-3xl mb-4">
              {{ strength.title }}
            </h1>
            <p class="text-center w-[80%] mx-auto mb-[80px]">
              {{ strength.brief }}
            </p>
          </div>
          {% endfor %}
        </div>
      </div>

      <!--Factory Section -->
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="factory">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
          <div>
            <img src="{{ factory_detail.image.url }}" alt="Factory Image" class="mx-auto" />
          </div>

          <div>
            <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center mt-5 font-bold mb-[12px]">
              Factory Details
            </h1>
            
            <p class="leading-loose text-center">
              {{ factory_detail.text|default:"Factory Details description" }}
            </p>

            <!-- <button
              class="mx-auto text-white flex bg-[#59B55E] px-5 py-2 rounded-lg mt-5"
            >
              Read More <i class="fa-solid ml-5 my-auto fa-arrow-right"></i>
            </button> -->
          </div>
        </div>
      </div>

      <!-- Achievement Carousel Section -->

      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto overflow-hidden" id="achievements">
        
        <h2 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center mt-5 font-bold mb-[64px]">
          Achievement
        </h2>
        
        <section class="my-0">
          <section class="carousel-3D-swiper-section">
            <div class="carousel-3D-swiper">
              <div class="swiper-wrapper max-w-[1000px]">
                {% for image in carousel_images %}
                <div class="swiper-slide">
                  <div
                    class="relative w-full h-[450px] overflow-hidden rounded-lg"
                  >
                    <img
                      class="w-full h-full object-cover"
                      src="{{ image.image.url }}"
                      alt="{{ image.alt_text }}"
                    />
                  </div>
                </div>
                {% endfor %}
              </div>
              <div class="swiper-pagination" style="bottom: -45px"></div>
            </div>
          </section>
        </section>
      </div>

      <!--Branch Section -->
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="branches">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-semibold text-center mt-5 mb-[40px]">
          Our Branches
        </h1>        
        <div
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10"
        >
          {% for branch in branches %}
          <div class="relative rounded-lg overflow-hidden">
            <div class="bg-black opacity-50 inset-0 absolute"></div>
            <img
              class="mx-auto w-full h-[240px] shadow-md"
              src="{{ branch.image.url }}"
              alt="{{ branch.name }}"
            />
            <p
              class="absolute top-[50%] left-[50%] text-white text-3xl uppercase font-semibold transform -translate-x-[50%] -translate-y-[50%]"
            >
              {{ branch.name }}
            </p>
          </div>
          {% empty %}
          <p class="text-center text-gray-500">No branches available.</p>
          {% endfor %}
        </div>
      </div>

      <!-- Gallery Section -->
      <div class="my-16 md:my[100px] max-w-full mx-auto" id="gallery">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center mt-0 mb-[40px]">
          Our Gallery
        </h1>        
        <style>
          @keyframes scroll-gallery {
            from {
              transform: translateX(0);
            }
            to {
              transform: translateX(-50%);
            }
          }
        
          .scroll-wrapper {
            overflow: hidden;
            white-space: nowrap;
            width: 100%;
            position: relative;
          }
        
          .scroll-container {
            display: flex;
            gap: 1rem;
            animation: scroll-gallery 30s linear infinite;
            width: max-content;
          }
        </style>
        
        <div class="scroll-wrapper">
          <div class="scroll-container">
            {% for i in '12345'|make_list %}
              <div class="flex flex-col gap-y-4 {% if forloop.counter0|divisibleby:'2' %}mt-32{% else %}mt-0{% endif %}">
                {% for gallery_image in gallery_images %}
                {% if i|add:i == forloop.counter or i|add:i|add:-1 == forloop.counter %}
                  <div class="h-[300px] w-[240px] overflow-hidden rounded-xl transition-transform transform hover:scale-105 hover:shadow-xl">
                    <img
                      src="{{ gallery_image.image.url }}"
                      class="h-[300px] w-[240px] object-cover rounded-xl transition-transform duration-300 hover:scale-110"
                      alt="{{ gallery_image.title }}"
                    />
                  </div>
                {% endif %}
                {% endfor %}
              </div>
            {% endfor %}
        
            <!-- Duplicate content for seamless infinite scrolling -->
            {% for i in '12345'|make_list %}
              <div class="flex flex-col gap-y-4 {% if forloop.counter0|divisibleby:'2' %}mt-32{% else %}mt-0{% endif %}">
                {% for gallery_image in gallery_images %}
                {% if i|add:i == forloop.counter or i|add:i|add:-1 == forloop.counter %}
                  <div class="h-[300px] w-[240px] overflow-hidden rounded-xl transition-transform transform hover:scale-105 hover:shadow-xl">
                    <img
                      src="{{ gallery_image.image.url }}"
                      class="h-[300px] w-[240px] object-cover rounded-xl transition-transform duration-300 hover:scale-110"
                      alt="{{ gallery_image.title }}"
                    />
                  </div>
                {% endif %}
                {% endfor %}
              </div>
            {% endfor %}
          </div>
        </div>
        
      


    </main>
    <!-- Video Section -->
    <section
      class="py-10 w-full relative bg-cover bg-center h-[456px]" id="video"
      {%
      if
      video_section.background_image
      %}
      style="background-image: url('{{ video_section.background_image.url }}');"
      {%
      endif
      %}
    >
      <!-- Overlay -->
      <div class="absolute inset-0 bg-black opacity-50"></div>

      <!-- Centered Button -->
      <div
        class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
      >
        {% if video_section.embed_url or video_section.video_file %}
        <button
          data-dialog-target="modal"
          class="rounded-md py-2 px-4 border border-transparent text-center text-sm text-white transition-all shadow-md hover:shadow-lg focus:shadow-lg active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none ml-2"
        >
          <img src="{% static 'assets/video.png' %}" alt="Play Video" />
        </button>
        {% endif %}
      </div>

      {% if video_section.embed_url or video_section.video_file %}
      <!-- Modal Backdrop -->
      <div
        id="video-modal"
        data-dialog-backdrop="modal"
        data-dialog-backdrop-close="true"
        class="fixed inset-0 z-[999] grid h-screen w-screen place-items-center bg-black bg-opacity-60 backdrop-blur-sm transition-opacity duration-300 pointer-events-none opacity-0"
      >
        <div
          data-dialog="modal"
          class="relative m-4 p-4 w-full sm:w-2/3 md:w-2/5 lg:w-2/5 min-w-[40%] max-w-[90%] rounded-lg bg-white shadow-sm"
        >
          <!-- Video Playback -->
          <div id="video-container">
            {% if video_section.embed_url %}
            <!-- Video Embed -->
            <iframe
              id="video-iframe"
              width="100%"
              height="315"
              src="{{ video_section.embed_url }}?enablejsapi=1"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
            >
            </iframe>
            {% elif video_section.video_file %}
            <!-- Local Video File -->
            <video id="video-file" width="100%" height="315" controls>
              <source
                src="{{ video_section.video_file.url }}"
                type="video/mp4"
              />
              Your browser does not support the video tag.
            </video>
            {% endif %}
          </div>

          <!-- Close Button -->
          <div class="flex shrink-0 flex-wrap items-center pt-4 justify-end">
            <button
              id="close-button"
              data-dialog-close="true"
              class="rounded-md border border-transparent py-2 px-4 text-center text-sm transition-all bg-slate-800 text-white hover:text-gray-400 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"
              type="button"
            >
              Close
            </button>
          </div>
        </div>
      </div>
      {% endif %}
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const closeButton = document.getElementById("close-button");
        const videoModal = document.getElementById("video-modal");
        const iframe = document.getElementById("video-iframe");
        const video = document.getElementById("video-file");

        // Function to pause the video
        function pauseVideo() {
          if (iframe) {
            const iframeSrc = iframe.src;
            iframe.src = ""; // Clear the src to stop the video
            iframe.src = iframeSrc; // Restore the src for future play
          }
          if (video) {
            video.pause();
            video.currentTime = 0; // Reset playback to the start
          }
        }

        // Close button event
        closeButton.addEventListener("click", function () {
          videoModal.classList.add("pointer-events-none", "opacity-0");
          pauseVideo();
        });

        // Backdrop click event
        videoModal.addEventListener("click", function (event) {
          const isBackdrop = !event.target.closest('[data-dialog="modal"]');
          if (isBackdrop) {
            videoModal.classList.add("pointer-events-none", "opacity-0");
            pauseVideo();
          }
        });

        // Show modal when the play button is clicked
        const playButton = document.querySelector(
          '[data-dialog-target="modal"]'
        );
        if (playButton) {
          playButton.addEventListener("click", function () {
            videoModal.classList.remove("pointer-events-none", "opacity-0");
          });
        }
      });
    </script>

    <!-- Contact Section -->
    <section>
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto bg-gray-200" id="contact">
        <div class="grid grid-cols-1 md:grid-cols-2">
          <div class="bg-[#1E1E1E]">
            <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center uppercase font-bold mt-10 text-white">
              Contact us
            </h1>
            
            <!-- <h3 class="m-5 text-white">
              Have a question? Concern? Request? Your questions haven't been
              answered? Connect with us in your convenient way.
            </h3> -->
            <form
              method="POST"
              action="{% url 'submit_company_inquiry' %}"
              class="space-y-8 w-[80%] mx-auto mt-10 mb-10"
            >
              {% csrf_token %}
              <div>
                <input
                  type="text"
                  id="name"
                  name="name"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="Name"
                  required
                />
              </div>
              <div>
                <input
                  type="tel"
                  id="phone_no"
                  name="phone_no"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="Phone No."
                  required
                />
              </div>
              <div>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="E-mail"
                  required
                />
              </div>
              <div>
                <input
                  type="text"
                  id="location"
                  name="location"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="Location of Company"
                  required
                />
              </div>
              <div class="flex justify-end">
                <button
                  type="submit"
                  class="py-2 px-5 text-sm font-medium text-center text-white rounded-sm bg-primary-700 sm:w-fit hover:bg-primary-800 bg-[#59B55E] focus:outline-none"
                >
                  Send
                </button>
              </div>
            </form>
          </div>
          <div class="relative">
            <!-- Map Wrapper -->
            <div class="mapswrapper">
              {% if contact_us.embed_code %}
              <iframe
                width="100%"
                height="450"
                loading="lazy"
                allowfullscreen
                src="{{ contact_us.embed_code }}"
              >
              </iframe>
              {% else %}
              <p>No location available</p>
              {% endif %}
              <a href="https://www.zrivo.com/i-9-form">i9 form</a>
              <style>
                .mapswrapper {
                  background: #fff;
                  position: relative;
                }

                .mapswrapper iframe {
                  border: 0;
                  position: relative;
                  z-index: 1; /* Ensure the map is beneath the overlay */
                }

                .mapswrapper a {
                  color: rgba(0, 0, 0, 0);
                  position: absolute;
                  left: 0;
                  top: 0;
                  z-index: 0;
                }
              </style>
            </div>

            <!-- Card Inside Map -->
            <div
              class="absolute px-20 py-5 space-y-2 right-0 bottom-0 bg-[#59B55E] text-white z-10"
            >
              <h1 class="text-xl">{{ contact_us.address }}</h1>
              <p class="text-sm">{{ contact_us.company_name }}</p>
              <p class="text-sm">{{ contact_us.phone_number }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer Section -->
    <footer class="bg-[#1E1E1E] text-white pt-10 pb-5">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-[1400px] p-5 space-y-5 mx-auto">
        <!-- Logo and Description Section -->
        <div class="mx-auto w-full">
          <div class="flex items-center space-x-3">
            {% if footer and footer.logo %}
              <img src="{{ footer.logo.url }}" alt="Footer Logo" class="w-[100px] h-[50px] object-contain" />
            {% else %}
              <h1 class="text-4xl font-bold tracking-widest">{{ footer.title }}</h1>
            {% endif %}
          </div>
    
          <!-- Footer Description -->
          <p class="text-sm w-[70%] leading-loose mt-5">{{ footer.description }}</p>
    
          <!-- Social Media Links -->
          <ul class="flex flex-row gap-5 mt-5 justify-start">
            {% if footer.fb_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.fb_link }}" target="_blank">
                  <img src="{% static 'assets/fb.png' %}" alt="Facebook" />
                </a>
              </li>
            {% endif %}
            {% if footer.twitter_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.twitter_link }}" target="_blank">
                  <img src="{% static 'assets/twitter.png' %}" alt="Twitter" />
                </a>
              </li>
            {% endif %}
            {% if footer.instagram_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.instagram_link }}" target="_blank">
                  <img src="{% static 'assets/instagram.png' %}" alt="Instagram" />
                </a>
              </li>
            {% endif %}
            {% if footer.youtube_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.youtube_link }}" target="_blank">
                  <img src="{% static 'assets/youtube.png' %}" alt="YouTube" />
                </a>
              </li>
            {% endif %}
          </ul>
        </div>
    
        <!-- Quick Links Section -->
        <div class="md:mx-auto">
          <h1 class="font-semibold text-lg md:text-3xl">Quick Links</h1>
          <ul class="mt-5 space-y-3">
            {% for link in footer_links %}
              <li class="text-base md:text-xl">
                <a href="{{ link.url }}" target="_blank">
                  <span class="text-[#59B55E] font-bold">&gt;</span> {{ link.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
    
        <!-- Right Side Section (Icons) -->
        <div class="flex flex-wrap justify-center gap-[10px]">
          <!-- Conference Section -->
          {% for conference in video_conferences %}
          <a href="{{ conference.url }}" target="_blank">
            <div class="flex flex-col items-center justify-center w-[120px] h-[150px] p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer">
              <svg width="100" height="100" viewBox="0 0 89 85" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- First shape rotating clockwise -->
                <path class="spin-clockwise" d="M83.6649 37.1189C83.6649 55.0159 58.5511 84.2541 40.654 84.2541C22.757 84.2541 14.1405 62.0862 14.1405 44.1892C14.1405 26.2922 22.757 0 40.654 0C58.5511 0 83.6649 19.2219 83.6649 37.1189Z" fill="#59B55E" fill-opacity="0.5"/>
                <!-- Second shape rotating counterclockwise -->
                <path class="spin-counterclockwise" d="M37.0246 8.0767C54.876 6.79971 85.8315 29.7633 87.1085 47.6147C88.3854 65.4661 66.8889 75.6424 49.0375 76.9193C31.1861 78.1963 4.34613 71.4778 3.06915 53.6264C1.79216 35.775 19.1732 9.35368 37.0246 8.0767Z" fill="#59B55E" fill-opacity="0.5"/>
                <!-- Static phone icon --><path d="M29.2051 59.1338C29.0898 59.1344 28.9762 59.1067 28.8741 59.0532C28.7721 58.9998 28.6846 58.9221 28.6195 58.8271C28.5544 58.732 28.5135 58.6224 28.5005 58.508C28.4874 58.3935 28.5026 58.2775 28.5448 58.1703L31.1845 51.3052C29.4236 48.5696 28.4903 45.3837 28.4966 42.1304C28.4966 32.7545 36.124 25.1271 45.4999 25.1271C54.8759 25.1271 62.5033 32.7545 62.5033 42.1304C62.5033 51.5064 54.8759 59.1338 45.4999 59.1338C42.3203 59.1338 39.2243 58.2468 36.5264 56.5635L29.4431 59.0927C29.3668 59.1203 29.2862 59.1342 29.2051 59.1338ZM36.6157 55.0714C36.7517 55.0714 36.8863 55.1097 37.0025 55.1862C39.5281 56.8394 42.4814 57.7194 45.4999 57.7183C54.0937 57.7183 61.0864 50.7256 61.0864 42.1319C61.0864 33.5381 54.0937 26.5454 45.4999 26.5454C36.9062 26.5454 29.9135 33.5381 29.9135 42.1319C29.9135 45.2463 30.8289 48.2531 32.5632 50.8262C32.6922 51.0175 32.7191 51.2612 32.6369 51.4766L30.4208 57.2393L36.3776 55.1125C36.4541 55.0855 36.5346 55.0716 36.6157 55.0714Z" fill="black"/>
                <path d="M49.7508 50.6321C47.5248 50.6321 43.2512 47.9697 41.456 46.1744C39.6607 44.3777 36.9983 40.1042 36.9983 37.8796C36.9983 35.5898 38.9466 33.6288 40.5406 33.6288H41.9576C42.0897 33.6289 42.2192 33.666 42.3314 33.7359C42.4436 33.8057 42.534 33.9056 42.5924 34.0241C42.5938 34.0255 43.4468 35.7599 44.0051 36.8481C44.6342 38.0766 43.451 39.5219 42.778 40.2034C43.0189 40.8212 43.5814 42.0454 44.5832 43.0472C45.585 44.049 46.8092 44.613 47.427 44.8524C48.1071 44.178 49.5524 42.9934 50.7823 43.6253C51.8705 44.185 53.6035 45.0366 53.6049 45.0366C53.8486 45.1571 54.0016 45.4036 54.0016 45.6728V47.0898C54.0016 48.6853 52.0391 50.6321 49.7508 50.6321ZM40.5406 35.0457C39.7401 35.0457 38.4152 36.3706 38.4152 37.8796C38.4152 39.5219 40.7305 43.4426 42.4592 45.1712C44.348 47.06 48.2318 49.2152 49.7508 49.2152C51.2598 49.2152 52.5847 47.8903 52.5847 47.0898V46.1135C51.7651 45.7104 50.9484 45.3013 50.1348 44.8864C49.8032 44.7079 48.7958 45.4178 48.1567 46.1418C48.0677 46.2423 47.952 46.3154 47.8231 46.3528C47.6942 46.3902 47.5573 46.3902 47.4284 46.353C47.3391 46.3275 45.2406 45.7068 43.5814 44.0476C41.9221 42.3883 41.3029 40.2898 41.276 40.2006C41.2388 40.0716 41.2388 39.9348 41.2762 39.8059C41.3136 39.677 41.3867 39.5613 41.4871 39.4723C42.2098 38.8332 42.9154 37.83 42.7426 37.4928C42.3472 36.7234 41.8045 35.6267 41.5183 35.0457H40.5406Z" fill="black"/>
                </svg>
              <p class="text-gray-800 text-xs md:text-sm text-center font-semibold mt-2">Whatsapp Message</p>
            </div>
          </a>
          {% endfor %}
        
          <!-- Appointment Section -->
          <div class="flex flex-col items-center justify-center w-[120px] h-[150px] p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer" onclick="openAppointmentPopup()">
            <svg width="89" height="85" viewBox="0 0 89 85" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- First shape rotating clockwise -->
              <path class="spin-clockwise" d="M83.6649 37.1189C83.6649 55.0159 58.5511 84.2541 40.654 84.2541C22.757 84.2541 14.1405 62.0862 14.1405 44.1892C14.1405 26.2922 22.757 0 40.654 0C58.5511 0 83.6649 19.2219 83.6649 37.1189Z" fill="#59B55E" fill-opacity="0.5"/>
              <!-- Second shape rotating counterclockwise -->
              <path class="spin-counterclockwise" d="M37.0246 8.0767C54.876 6.79971 85.8315 29.7633 87.1085 47.6147C88.3854 65.4661 66.8889 75.6424 49.0375 76.9193C31.1861 78.1963 4.34613 71.4778 3.06915 53.6264C1.79216 35.775 19.1732 9.35368 37.0246 8.0767Z" fill="#59B55E" fill-opacity="0.5"/>
              <!-- Static phone icon --><path d="M37.8333 25.4603V30.4603" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M51.1667 25.4603V30.4603" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M59.5 36.2937V44.8437C58.0167 43.6603 56.1333 42.9603 54.0833 42.9603C52.0333 42.9603 50.1167 43.6769 48.6167 44.8936C46.6 46.4769 45.3333 48.9603 45.3333 51.7103C45.3333 53.3437 45.8 54.9103 46.6 56.2103C47.2167 57.227 48.0167 58.1103 48.9667 58.7937H37.8333C32 58.7937 29.5 55.4603 29.5 50.4603V36.2937C29.5 31.2937 32 27.9603 37.8333 27.9603H51.1667C57 27.9603 59.5 31.2937 59.5 36.2937Z" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M36.1667 40.4603H46.1667" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M36.1667 48.7937H40.5333" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M62.8333 51.7103C62.8333 53.3437 62.3666 54.9103 61.5666 56.2103C61.1 57.0103 60.5167 57.7103 59.8333 58.277C58.3 59.6437 56.3 60.4603 54.0833 60.4603C52.1666 60.4603 50.4 59.8437 48.9666 58.7937C48.0166 58.1103 47.2167 57.227 46.6 56.2103C45.8 54.9103 45.3333 53.3437 45.3333 51.7103C45.3333 48.9603 46.6 46.4769 48.6166 44.8936C50.1166 43.6769 52.0333 42.9603 54.0833 42.9603C56.1333 42.9603 58.0166 43.6603 59.5 44.8437C61.5333 46.4437 62.8333 48.927 62.8333 51.7103Z" stroke="black" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M54.0834 55.877C54.0834 53.577 55.95 51.7104 58.25 51.7104C55.95 51.7104 54.0834 49.8437 54.0834 47.5437C54.0834 49.8437 52.2167 51.7104 49.9167 51.7104C52.2167 51.7104 54.0834 53.577 54.0834 55.877Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            <p class="text-gray-800 text-xs md:text-sm text-center font-semibold mt-2">Fix an Appointment</p>
          </div>
        </div>
        

      </div>
    
      <!-- Footer Bottom Section -->
      <hr class="border-gray-600 border-t-2 mt-5 w-full" />
      <!-- Footer Bottom Section -->
      <div class="w-full text-white text-center py-1">
        <p class="mt-5 text-center mx-auto">&copy; 2025. All rights reserved</p>
        <a href="https://socialmicrofinance.org/" class="text-sm text-white  md:mr-6 block md:inline-block mt-2 md:mt-0" target="_blank">Made by SMF</a>
      </div>

    </footer>
    
    <script>
      function openAppointmentPopup() {
        document.getElementById("appointment-popup").classList.remove("hidden");
      }
    
      function closeAppointmentPopup(event) {
        const popup = document.getElementById("appointment-popup");
        if (!event || event.target === popup) {
          popup.classList.add("hidden");
        }
      }
    </script>
    
    <!-- Popup Modal for Appointment -->
    <div id="appointment-popup" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" onclick="closeAppointmentPopup(event)">
      <div class="bg-white mt-6 p-6 rounded-lg shadow-lg w-10/12 max-w-sm" onclick="event.stopPropagation()">
        <form method="POST" action="{% url 'submit_appointment' %}">
          <h2 class="text-black text-lg font-semibold mb-3">Get your Appointment</h2>
          {% csrf_token %}
          <div class="mb-3">
            <label for="name" class="block text-gray-700 text-sm">Name</label>
            <input type="text" id="name" name="name" class="text-black w-full border border-gray-300 p-2 rounded text-sm" required />
          </div>
          <div class="mb-3">
            <label for="calendar" class="block text-gray-700 text-sm">Date and Time</label>
            <input type="datetime-local" id="calendar" name="calendar" class="text-black w-full border border-gray-300 p-2 rounded text-sm" required />
          </div>
          <div class="mb-3">
            <label for="phone_number" class="block text-gray-700 text-sm">Phone Number</label>
            <input type="tel" id="phone_number" name="phone_number" class="text-black w-full border border-gray-300 p-2 rounded text-sm" required />
          </div>
          <div class="mb-3">
            <label for="email" class="block text-gray-700 text-sm">Email (optional)</label>
            <input type="email" id="email" name="email" class="text-black w-full border border-gray-300 p-2 rounded text-sm" />
          </div>
          <div class="mb-3">
            <label for="short_message" class="block text-gray-700 text-sm">Short Message</label>
            <textarea id="short_message" name="short_message" class="text-black w-full border border-gray-300 p-2 rounded text-sm"></textarea>
          </div>
          <div class="flex justify-between mt-4">
            <button type="button" onclick="closeAppointmentPopup()" class="bg-red-500 text-white px-3 py-2 rounded text-sm">Cancel</button>
            <button type="submit" class="bg-green-500 text-white px-3 py-2 rounded text-sm">Submit</button>
          </div>
        </form>
      </div>
    </div>
    
    
    

    <!-- Custom Scripts -->


    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
      const menuToggle = document.getElementById("menu-toggle");
      const menuClose = document.getElementById("menu-close");
      const menuDrawer = document.getElementById("menu-drawer");
      const menuOverlay = document.getElementById("menu-overlay");
      const navbar = document.getElementById("navbar");

      // Adjust drawer position below the navbar
      const adjustDrawerPosition = () => {
        const navbarHeight = navbar.offsetHeight;
        menuDrawer.style.top = `${navbarHeight}px`;
      };

      window.addEventListener("resize", adjustDrawerPosition);
      window.addEventListener("load", adjustDrawerPosition);

      // Open Drawer
      menuToggle.addEventListener("click", () => {
        menuDrawer.classList.remove("translate-x-full");
        menuOverlay.classList.remove("hidden");
      });

      // Close Drawer on Close Button or Overlay Click
      const closeDrawer = () => {
        menuDrawer.classList.add("translate-x-full");
        menuOverlay.classList.add("hidden");
      };

      menuClose.addEventListener("click", closeDrawer);
      menuOverlay.addEventListener("click", closeDrawer);

      // Handle opening the modal
      document.querySelectorAll("[data-dialog-target]").forEach((button) => {
        button.addEventListener("click", () => {
          const modalId = button.getAttribute("data-dialog-target");
          const backdrop = document.querySelector(
            `[data-dialog-backdrop="${modalId}"]`
          );
          if (backdrop) {
            backdrop.classList.remove("pointer-events-none", "opacity-0");
            backdrop.classList.add("opacity-100", "pointer-events-auto");
          }
        });
      });

      // Handle closing the modal
      document.querySelectorAll("[data-dialog-close]").forEach((button) => {
        button.addEventListener("click", () => {
          const modal = button.closest("[data-dialog-backdrop]");
          if (modal) {
            modal.classList.add("pointer-events-none", "opacity-0");
            modal.classList.remove("opacity-100", "pointer-events-auto");
          }
        });
      });

      // Close modal when clicking on the backdrop
      document
        .querySelectorAll('[data-dialog-backdrop-close="true"]')
        .forEach((backdrop) => {
          backdrop.addEventListener("click", (event) => {
            if (event.target === backdrop) {
              backdrop.classList.add("pointer-events-none", "opacity-0");
              backdrop.classList.remove("opacity-100", "pointer-events-auto");
            }
          });
        });

      // Achievement carousel
      document.addEventListener("DOMContentLoaded", () => {
        const carousel3Dswiper = new Swiper(".carousel-3D-swiper", {
          loop: true,
          effect: "coverflow",
          grabCursor: true,
          centeredSlides: true,
          slidesPerView: 4,
          coverflowEffect: {
            rotate: 0,
            stretch: 0,
            depth: 350,
            modifier: 1,
            slideShadows: true,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          autoplay: {
            delay: 2000, // Delay in milliseconds (3 seconds in this case)
            disableOnInteraction: false, // Keep autoplay even after interacting with the carousel
          },
          breakpoints: {
            0: {
              // Mobile devices
              slidesPerView: 1.5, // Show the center image bigger and part of the side images
              coverflowEffect: {
                depth: 200,
                stretch: 50, // Pull side images closer
              },
            },
            768: {
              // Tablets
              slidesPerView: 2.5,
              coverflowEffect: {
                depth: 300,
                stretch: 30,
              },
            },
            1024: {
              // Laptops and larger
              slidesPerView: 4,
              coverflowEffect: {
                depth: 350,
                stretch: 0,
              },
            },
          },
        });
      });

      // Accordion functionality for collapsing and expanding items
      document.addEventListener("DOMContentLoaded", () => {
        const accordionHeaders = document.querySelectorAll(".accordion-header");

        accordionHeaders.forEach((header) => {
          header.addEventListener("click", (event) => {
            event.stopPropagation(); // Stop propagation to avoid conflicts

            const parent = header.parentElement; // Current accordion-item
            const content = parent.querySelector(":scope > .accordion-collapse"); // Immediate accordion-collapse

            // Collapse other open accordion items
            const allAccordions = document.querySelectorAll(".accordion-item");
            allAccordions.forEach((accordion) => {
              if (accordion !== parent && accordion.classList.contains("active")) {
                const otherContent = accordion.querySelector(":scope > .accordion-collapse");
                otherContent.style.maxHeight = null; // Collapse the other accordion
                accordion.classList.remove("active"); // Remove active class from other accordion
                const icon = accordion.querySelector("i");
                if (icon) icon.classList.remove("rotate-180"); // Reset icon rotation
              }
            });

            // Toggle active state for the current accordion
            parent.classList.toggle("active");

            // Rotate icon
            const icon = header.querySelector("i");
            if (icon) icon.classList.toggle("rotate-180");

            // Expand/Collapse logic for the current accordion
            if (content.style.maxHeight) {
              content.style.maxHeight = null; // Collapse the current accordion
              collapseNestedAccordions(content); // Collapse all nested accordions
            } else {
              content.style.maxHeight = content.scrollHeight + "px"; // Expand the current accordion
            }
          });
        });

        // Function to collapse all nested accordions
        function collapseNestedAccordions(parentContent) {
          const nestedContents = parentContent.querySelectorAll(".accordion-collapse");
          nestedContents.forEach((nested) => {
            nested.style.maxHeight = null; // Collapse all nested accordions
            const nestedIcons = nested.parentElement.querySelectorAll("i.rotate-180");
            nestedIcons.forEach((icon) => icon.classList.remove("rotate-180")); // Reset icon rotation
          });
        }
      });

      function setCategoryAndSubmit(categoryId) {
        // Set the category value
        const input = document.createElement("input");
        input.type = "hidden";
        input.name = "category_level3";
        input.value = categoryId;

        // Append the input to the form and submit it
        const form = document.getElementById("filterForm");
        form.appendChild(input);
        form.submit();
      }
    </script>
    
{% endblock %}