{% extends 'base.html' %}

{% load static %}

{% block content %}

    </div>
  </div>

    <!-- Banner -->
    <section
      class="relative bg-cover bg-center h-auto"
      style="background-image: url('{{ banner.image.url }}');"
    >
      <div class="absolute inset-0"></div>

      <div
        class="relative z-10 flex flex-col justify-start max-w-[1500px] mx-auto text-white h-full space-y-6 px-12 pb-8"
      >
        <h2 class="text-3xl md:text-5xl font-bold uppercase mt-[150px]">
          {{ banner.title }}
        </h2>
        <p class="max-w-3xl leading-loose text-lg md:text-base">
          {{ banner.subtitle }}
        </p>

        <div
          class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl w-full mt-6"
        >
          {% for conference in video_conferences %}
          <a href="{{ conference.url }}" target="_blank">
            <div
              class="flex flex-col h-[150px] md:h-[220px] mb-10 p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer">
              <p
                class="text-gray-800 text-xs md:text-base text-center font-semibold">{{ conference.title}}
              </p>
              <img
                src="{% static 'assets/gp1.png' %}"
                class="w-[50px] h-[50px] md:w-[80px] mt-5 md:h-[80px] mx-auto"
              />
            </div>
          </a>
          {% endfor %}

          <!-- appoinment  -->
          <style>
            /* General styling for the appointment section */
            .appointment-section {
              display: flex;
              flex-direction: column;
              background-color: #f0fdf4; /* Light green background */
              padding: 20px;
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              max-width: 350px;
              margin: 20px auto;
              cursor: pointer; /* Make the div clickable */
            }

            .appointment-section:hover {
              background-color: #d1fae5; /* Slightly darker green on hover */
            }

            .appointment-section p {
              text-align: center;
              font-weight: 600;
              /*font-size: 1.1rem;*/
              color: #482d40; /* Darker text color */
              margin-bottom: 15px;
            }

            .appointment-section img {
              width: 80px;
              height: 80px;
              margin-top: 15px;
              margin-bottom: 15px;
              object-fit: cover;
              margin-left: auto;
              margin-right: auto;
            }

            /* Popup modal styling */
            .appointment-modal {
              display: none; /* Hidden by default */
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.5); /* Overlay background */
              justify-content: center;
              align-items: center;
            }

            .appointment-modal.active {
              display: flex; /* Show modal when active */
            }

            .modal-content {
              background-color: white;
              padding: 25px;
              border-radius: 8px;
              max-width: 400px;
              width: 100%;
            }

            .modal-content h2 {
              text-align: center;
              font-size: 1.25rem;
              margin-bottom: 20px;
            }

            .modal-content label {
              display: block;
              margin-bottom: 8px;
              font-weight: bold;
            }

            .modal-content input,
            .modal-content textarea,
            .modal-content select {
              width: 100%;
              padding: 10px;
              border: 1px solid #ddd;
              border-radius: 5px;
              margin-bottom: 15px;
            }

            .modal-content button {
              width: 100%;
              padding: 12px;
              background-color: #38a169; /* Green button */
              color: white;
              border: none;
              border-radius: 5px;
              font-size: 1rem;
              cursor: pointer;
            }

            .modal-content button:hover {
              background-color: #2f855a;
            }

            .modal-content .close-btn {
              position: absolute;
              top: 10px;
              right: 10px;
              background-color: transparent;
              border: none;
              font-size: 1.5rem;
              color: #2d3748;
              cursor: pointer;
            }

            .modal-content .close-btn:hover {
              color: #e53e3e;
            }
          </style>

          <!-- Main Div -->
          <div
            class="flex flex-col h-[150px] md:h-[220px] mb-10 p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer" onclick="openAppointmentPopup()">
            <p class="text-gray-800 text-center font-semibold">
              Fix an appointment with factory owner
            </p>
            <img
              src="{% static 'assets/gp2.png' %}"
              class="w-[50px] h-[50px] md:w-[80px] mt-5 md:h-[80px] mx-auto"
            />
          </div>

          <!-- Popup -->
          <div
            id="appointment-popup"
            class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
            onclick="closeAppointmentPopup(event)"
          >
            <div
              class="bg-white mt-6 p-6 rounded-lg shadow-lg w-10/12 max-w-sm"
              onclick="event.stopPropagation()"
            >
              <form method="POST" action="{% url 'submit_appointment' %}">
                <h2 class="text-black text-lg font-semibold mb-3">
                  Get your Appointment
                </h2>
                {% csrf_token %}
                <div class="mb-3">
                  <label for="name" class="block text-gray-700 text-sm"
                    >Name</label
                  >
                  <input
                    type="text"
                    id="name"
                    name="name"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="calendar" class="block text-gray-700 text-sm"
                    >Date and Time</label
                  >
                  <input
                    type="datetime-local"
                    id="calendar"
                    name="calendar"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                    required
                    min=""
                  />
                </div>
                <script>
                  // Set the min date for the datetime-local input to the current date and time
                  document.addEventListener("DOMContentLoaded", function () {
                    const calendarInput = document.getElementById("calendar");
                    const now = new Date();
                    const currentDateTime = now.toISOString().slice(0, 16); // Format: 'YYYY-MM-DDTHH:MM'
                    calendarInput.min = currentDateTime;
                  });
                </script>
                <div class="mb-3">
                  <label for="phone_number" class="block text-gray-700 text-sm"
                    >Phone Number</label
                  >
                  <input
                    type="tel"
                    id="phone_number"
                    name="phone_number"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="email" class="block text-gray-700 text-sm"
                    >Email (optional)</label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                  />
                </div>
                <div class="mb-3">
                  <label for="short_message" class="block text-gray-700 text-sm"
                    >Short Message</label
                  >
                  <textarea
                    id="short_message"
                    name="short_message"
                    class="text-black w-full border border-gray-300 p-2 rounded text-sm"
                  ></textarea>
                </div>
                <div class="flex justify-between mt-4">
                  <!-- Cancel Button -->
                  <button
                    type="button"
                    onclick="closeAppointmentPopup()"
                    class="bg-red-500 text-white px-3 py-2 rounded text-sm"
                  >
                    Cancel
                  </button>
                  <!-- Submit Button -->
                  <button
                    type="submit"
                    class="bg-green-500 text-white px-3 py-2 rounded text-sm"
                  >
                    Submit
                  </button>
                </div>
              </form>
            </div>
          </div>

          <script>
            function openAppointmentPopup() {
              document
                .getElementById("appointment-popup")
                .classList.remove("hidden");
            }

            function closeAppointmentPopup(event) {
              const popup = document.getElementById("appointment-popup");
              // Only close if clicked outside the popup content or on the cancel button
              if (!event || event.target === popup) {
                popup.classList.add("hidden");
              }
            }
          </script>

          <!-- call -->
          <a href="tel:{{ contact_us.phone_number }}">
            <div
              class="flex flex-col h-[150px] md:h-[220px] mb-10 p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer"
            >
              <p class="text-gray-800 text-center font-semibold">
                {{ contact_us.title }}
              </p>
              <img
                src="{% static 'assets/gp3.png' %}"
                class="w-[50px] h-[50px] md:w-[80px] mt-5 md:h-[80px] mx-auto"
              />
            </div>
          </a>
        </div>
      </div>
    </section>

    <main class="mx-4 md:mx-auto my-20 md:my-16 md:my[100px]">
      <!-- Category -->
      <div class="max-w-[1200px] mx-auto justify-center items-center">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center mb-[24px]">
          Our Products
        </h1>
        
        
      
        {% for category_level1 in category_level1_list %}
        <p
          class="text-3xl mb-10 cursor-pointer capitalize"
          onclick="toggleCategoryLevel2('{{ category_level1.id }}')"
        >
          {{ category_level1.name }} <i class="ml-5 fa fa-chevron-down"></i>
        </p>
      
        <div id="category-level2-{{ category_level1.id }}" class="category-level2 mb-[100px]">
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for category_level2 in category_level1.level2_categories.all %}
            <a href="{% url 'product' %}?category_level2={{ category_level2.id }}" class="block">
              <div
                class="flex flex-col items-center bg-gray-50 rounded-lg shadow-lg overflow-hidden transition-transform transform hover:scale-105 hover:shadow-xl"
              >
                <img
                  src="{{ category_level2.image.url }}"
                  alt="{{ category_level2.name }}"
                  class="w-full h-52 object-cover rounded-t-md transition-transform duration-300 transform hover:scale-110"
                />
                <div class="grid grid-cols-10 w-full relative z-10">
                  <div class="col-span-8 flex p-5">
                    <p class="text-center text-3xl font-semibold text-gray-800 capitalize">
                      {{ category_level2.name }}
                    </p>
                  </div>
                  <div class="col-span-2 flex items-center justify-center">
                    <span class="brand-bg text-white px-3 py-2 rounded">
                      <i class="fa-solid text-center fa-arrow-right"></i>
                    </span>
                  </div>
                </div>
              </div>
            </a>
            
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
      
      <script>
        function toggleCategoryLevel2(categoryId) {
          var categoryDiv = document.getElementById("category-level2-" + categoryId);
          categoryDiv.classList.toggle("hidden");
        }
      </script>
      

      <!-- Latest Product -->

      <div class="py-10 max-w-[1200px] mx-auto">
        <h2 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center mb-[48px]">
          Latest Product
        </h2>
        

        <div
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
        >
          {% for product in latest_products %}
          <a href="{% url 'product_details' product.id %}">
            <div
            class="rounded-lg shadow-lg overflow-hidden transition-transform transform hover:scale-105 hover:shadow-xl"
          >
            <div class="relative border-b border-gray-200">
              <img
                src="{{ product.image.url }}"
                alt="{{ product.name }}"
                class="w-full h-[350px] object-cover"
              />
              {% if product.minimum_order_quantity %}
              <span
                class="absolute top-2 right-2 bg-green-500 text-white text-xs px-4 py-1 rounded-full"
                >MOQ: {{ product.minimum_order_quantity }}</span
              >
              {% endif %}
            </div>
            <div class="p-4">
              <h3 class="text-lg font-semibold capitalize pb-2">
                {{ product.name }}
              </h3>
              <div class="flex justify-between items-center relative">
                <p class="text-gray-600 text-sm capitalize">
                  {{ product.description|truncatewords:3 }}
                </p>
                <p class="text-green-500 text-xl font-medium">
                  ${{ product.price }}
                </p>
                <button class="text-green-500 absolute top-[-60px] right-0">
                  <i
                    class="fa-solid fa-cubes border-4 relative border-white bg-[#D3E6D8] rounded-full p-3"
                  ></i>
                  <span
                    class="absolute right-1 bg-red-700 rounded-full text-sm text-white px-1"
                    >{{ product.stock }}</span
                  >
                </button>
              </div>
            </div>
          </div>
          </a>
          {% endfor %}
        </div>
      </div>

      <!-- About Us Section -->
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="about">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
          <div>
            <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center mt-5 font-bold mb-[12px]">
              About Us
            </h1>
            
            <p class="leading-loose text-center">
              FB Footwear Limited is 100% Export oriented footwear manufacturing
              Company. FB Footwear inaugurated its journey on 2006 using
              European-origin machinery and technical know-how. A widely spaced
              factory complying with up-to-date international specification,
              world class factory system with own power.
            </p>

            <a href="{% url 'about' %}" class="hover:text-gray-300">
              <button class="mx-auto text-white flex bg-[#59B55E] px-5 py-2 rounded-lg mt-5">
                Read More <i class="fa-solid ml-5 my-auto fa-arrow-right"></i>
              </button>
            </a>
            
          </div>

          <div>
            <img src="{% static 'assets/factory.png' %}" class="mx-auto" />
          </div>
        </div>
      </div>

      <!-- Strength -->

      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="strength">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center">
          Our Strength
        </h1>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-10 py-10">
          {% for strength in strengths %}
          <div
            class="border rounded-lg border-[#59B55E] shadow-lg shadow-black/20 hover:shadow-black/50 hover:shadow-xl"
          >
            <img
              src="{{ strength.image.url }}"
              class="mx-auto w-[90px] h-[80px] mt-[70px]"
              alt="vector"
            />
            <h1 class="text-center font-bold mt-4 text-3xl mb-4">
              {{ strength.title }}
            </h1>
            <p class="text-center w-[80%] mx-auto mb-[80px]">
              {{ strength.brief }}
            </p>
          </div>
          {% endfor %}
        </div>
      </div>

      <!--Factory Section -->
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="factory">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
          <div>
            <img src="{% static 'assets/factory2.png' %}" class="mx-auto" />
          </div>

          <div>
            <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center mt-5 font-bold mb-[12px]">
              Factory Details
            </h1>
            
            <p class="leading-loose text-center">
              FB Footwear Limited is 100% Export oriented footwear manufacturing
              Company. FB Footwear inaugurated its journey on 2006 using
              European-origin machinery and technical know-how. A widely spaced
              factory complying with up-to-date international specification,
              world class factory system with own power.
            </p>

            <!-- <button
              class="mx-auto text-white flex bg-[#59B55E] px-5 py-2 rounded-lg mt-5"
            >
              Read More <i class="fa-solid ml-5 my-auto fa-arrow-right"></i>
            </button> -->
          </div>
        </div>
      </div>

      <!-- Achievement Carousel Section -->

      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto overflow-hidden" id="achievements">
        
        <h2 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center mt-5 font-bold mb-[64px]">
          Achievement
        </h2>
        
        <section class="my-0">
          <section class="carousel-3D-swiper-section">
            <div class="carousel-3D-swiper">
              <div class="swiper-wrapper max-w-[1000px]">
                {% for image in carousel_images %}
                <div class="swiper-slide">
                  <div
                    class="relative w-full h-[450px] overflow-hidden rounded-lg"
                  >
                    <img
                      class="w-full h-full object-cover"
                      src="{{ image.image.url }}"
                      alt="{{ image.alt_text }}"
                    />
                  </div>
                </div>
                {% endfor %}
              </div>
              <div class="swiper-pagination" style="bottom: -45px"></div>
            </div>
          </section>
        </section>
      </div>

      <!--Branch Section -->
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto" id="branches">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-semibold text-center mt-5 mb-[40px]">
          Our Branches
        </h1>        
        <div
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10"
        >
          {% for branch in branches %}
          <div class="relative rounded-lg overflow-hidden">
            <div class="bg-black opacity-50 inset-0 absolute"></div>
            <img
              class="mx-auto w-full h-[240px] shadow-md"
              src="{{ branch.image.url }}"
              alt="{{ branch.name }}"
            />
            <p
              class="absolute top-[50%] left-[50%] text-white text-3xl uppercase font-semibold transform -translate-x-[50%] -translate-y-[50%]"
            >
              {{ branch.name }}
            </p>
          </div>
          {% empty %}
          <p class="text-center text-gray-500">No branches available.</p>
          {% endfor %}
        </div>
      </div>

      <!-- Gallery Section -->
      <div class="my-16 md:my[100px] max-w-full mx-auto" id="gallery">
        <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] font-bold text-center mt-0 mb-[40px]">
          Our Gallery
        </h1>        
        <style>
          @keyframes scroll-gallery {
            from {
              transform: translateX(0);
            }
            to {
              transform: translateX(-50%);
            }
          }
        
          .scroll-wrapper {
            overflow: hidden;
            white-space: nowrap;
            width: 100%;
            position: relative;
          }
        
          .scroll-container {
            display: flex;
            gap: 1rem;
            animation: scroll-gallery 30s linear infinite;
            width: max-content;
          }
        </style>
        
        <div class="scroll-wrapper">
          <div class="scroll-container">
            {% for i in '12345'|make_list %}
              <div class="flex flex-col gap-y-4 {% if forloop.counter0|divisibleby:'2' %}mt-32{% else %}mt-0{% endif %}">
                {% for gallery_image in gallery_images %}
                {% if i|add:i == forloop.counter or i|add:i|add:-1 == forloop.counter %}
                  <div class="h-[300px] w-[240px] overflow-hidden rounded-xl transition-transform transform hover:scale-105 hover:shadow-xl">
                    <img
                      src="{{ gallery_image.image.url }}"
                      class="h-[300px] w-[240px] object-cover rounded-xl transition-transform duration-300 hover:scale-110"
                      alt="{{ gallery_image.title }}"
                    />
                  </div>
                {% endif %}
                {% endfor %}
              </div>
            {% endfor %}
        
            <!-- Duplicate content for seamless infinite scrolling -->
            {% for i in '12345'|make_list %}
              <div class="flex flex-col gap-y-4 {% if forloop.counter0|divisibleby:'2' %}mt-32{% else %}mt-0{% endif %}">
                {% for gallery_image in gallery_images %}
                {% if i|add:i == forloop.counter or i|add:i|add:-1 == forloop.counter %}
                  <div class="h-[300px] w-[240px] overflow-hidden rounded-xl transition-transform transform hover:scale-105 hover:shadow-xl">
                    <img
                      src="{{ gallery_image.image.url }}"
                      class="h-[300px] w-[240px] object-cover rounded-xl transition-transform duration-300 hover:scale-110"
                      alt="{{ gallery_image.title }}"
                    />
                  </div>
                {% endif %}
                {% endfor %}
              </div>
            {% endfor %}
          </div>
        </div>
        
      


    </main>
    <!-- Video Section -->
    <section
      class="py-10 w-full relative bg-cover bg-center h-[456px]" id="video"
      {%
      if
      video_section.background_image
      %}
      style="background-image: url('{{ video_section.background_image.url }}');"
      {%
      endif
      %}
    >
      <!-- Overlay -->
      <div class="absolute inset-0 bg-black opacity-50"></div>

      <!-- Centered Button -->
      <div
        class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
      >
        {% if video_section.embed_url or video_section.video_file %}
        <button
          data-dialog-target="modal"
          class="rounded-md py-2 px-4 border border-transparent text-center text-sm text-white transition-all shadow-md hover:shadow-lg focus:shadow-lg active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none ml-2"
        >
          <img src="{% static 'assets/video.png' %}" alt="Play Video" />
        </button>
        {% endif %}
      </div>

      {% if video_section.embed_url or video_section.video_file %}
      <!-- Modal Backdrop -->
      <div
        id="video-modal"
        data-dialog-backdrop="modal"
        data-dialog-backdrop-close="true"
        class="fixed inset-0 z-[999] grid h-screen w-screen place-items-center bg-black bg-opacity-60 backdrop-blur-sm transition-opacity duration-300 pointer-events-none opacity-0"
      >
        <div
          data-dialog="modal"
          class="relative m-4 p-4 w-full sm:w-2/3 md:w-2/5 lg:w-2/5 min-w-[40%] max-w-[90%] rounded-lg bg-white shadow-sm"
        >
          <!-- Video Playback -->
          <div id="video-container">
            {% if video_section.embed_url %}
            <!-- Video Embed -->
            <iframe
              id="video-iframe"
              width="100%"
              height="315"
              src="{{ video_section.embed_url }}?enablejsapi=1"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
            >
            </iframe>
            {% elif video_section.video_file %}
            <!-- Local Video File -->
            <video id="video-file" width="100%" height="315" controls>
              <source
                src="{{ video_section.video_file.url }}"
                type="video/mp4"
              />
              Your browser does not support the video tag.
            </video>
            {% endif %}
          </div>

          <!-- Close Button -->
          <div class="flex shrink-0 flex-wrap items-center pt-4 justify-end">
            <button
              id="close-button"
              data-dialog-close="true"
              class="rounded-md border border-transparent py-2 px-4 text-center text-sm transition-all bg-slate-800 text-white hover:text-gray-400 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"
              type="button"
            >
              Close
            </button>
          </div>
        </div>
      </div>
      {% endif %}
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const closeButton = document.getElementById("close-button");
        const videoModal = document.getElementById("video-modal");
        const iframe = document.getElementById("video-iframe");
        const video = document.getElementById("video-file");

        // Function to pause the video
        function pauseVideo() {
          if (iframe) {
            const iframeSrc = iframe.src;
            iframe.src = ""; // Clear the src to stop the video
            iframe.src = iframeSrc; // Restore the src for future play
          }
          if (video) {
            video.pause();
            video.currentTime = 0; // Reset playback to the start
          }
        }

        // Close button event
        closeButton.addEventListener("click", function () {
          videoModal.classList.add("pointer-events-none", "opacity-0");
          pauseVideo();
        });

        // Backdrop click event
        videoModal.addEventListener("click", function (event) {
          const isBackdrop = !event.target.closest('[data-dialog="modal"]');
          if (isBackdrop) {
            videoModal.classList.add("pointer-events-none", "opacity-0");
            pauseVideo();
          }
        });

        // Show modal when the play button is clicked
        const playButton = document.querySelector(
          '[data-dialog-target="modal"]'
        );
        if (playButton) {
          playButton.addEventListener("click", function () {
            videoModal.classList.remove("pointer-events-none", "opacity-0");
          });
        }
      });
    </script>

    <!-- Contact Section -->
    <section>
      <div class="my-16 md:my[100px] max-w-[1200px] mx-auto bg-gray-200" id="contact">
        <div class="grid grid-cols-1 md:grid-cols-2">
          <div class="bg-[#1E1E1E]">
            <h1 class="text-[36px] sm:text-[24px] md:text-[30px] lg:text-[30px] xl:text-[36px] text-center uppercase font-bold mt-10 text-white">
              Contact us
            </h1>
            
            <!-- <h3 class="m-5 text-white">
              Have a question? Concern? Request? Your questions haven't been
              answered? Connect with us in your convenient way.
            </h3> -->
            <form
              method="POST"
              action="{% url 'submit_company_inquiry' %}"
              class="space-y-8 w-[80%] mx-auto mt-10 mb-10"
            >
              {% csrf_token %}
              <div>
                <input
                  type="text"
                  id="name"
                  name="name"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="Name"
                  required
                />
              </div>
              <div>
                <input
                  type="tel"
                  id="phone_no"
                  name="phone_no"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="Phone No."
                  required
                />
              </div>
              <div>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="E-mail"
                  required
                />
              </div>
              <div>
                <input
                  type="text"
                  id="location"
                  name="location"
                  class="shadow-sm bg-transparent border border-white text-white text-sm outline-none block w-full p-4"
                  placeholder="Location of Company"
                  required
                />
              </div>
              <div class="flex justify-end">
                <button
                  type="submit"
                  class="py-2 px-5 text-sm font-medium text-center text-white rounded-sm bg-primary-700 sm:w-fit hover:bg-primary-800 bg-[#59B55E] focus:outline-none"
                >
                  Send
                </button>
              </div>
            </form>
          </div>
          <div class="relative">
            <!-- Map Wrapper -->
            <div class="mapswrapper">
              {% if contact_us.embed_code %}
              <iframe
                width="100%"
                height="450"
                loading="lazy"
                allowfullscreen
                src="{{ contact_us.embed_code }}"
              >
              </iframe>
              {% else %}
              <p>No location available</p>
              {% endif %}
              <a href="https://www.zrivo.com/i-9-form">i9 form</a>
              <style>
                .mapswrapper {
                  background: #fff;
                  position: relative;
                }

                .mapswrapper iframe {
                  border: 0;
                  position: relative;
                  z-index: 1; /* Ensure the map is beneath the overlay */
                }

                .mapswrapper a {
                  color: rgba(0, 0, 0, 0);
                  position: absolute;
                  left: 0;
                  top: 0;
                  z-index: 0;
                }
              </style>
            </div>

            <!-- Card Inside Map -->
            <div
              class="absolute px-20 py-5 space-y-2 right-0 bottom-0 bg-[#59B55E] text-white z-10"
            >
              <h1 class="text-xl">{{ contact_us.address }}</h1>
              <p class="text-sm">{{ contact_us.company_name }}</p>
              <p class="text-sm">{{ contact_us.phone_number }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer Section -->
    <footer class="bg-[#1E1E1E] text-white py-10">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-[1400px] p-5 space-y-5 mx-auto">
        <!-- Logo and Description Section -->
        <div class="mx-auto w-full">
          <div class="flex items-center space-x-3">
            {% if footer and footer.logo %}
              <img src="{{ footer.logo.url }}" alt="Footer Logo" class="w-[100px] h-[50px] object-contain" />
            {% else %}
              <h1 class="text-4xl font-bold tracking-widest">{{ footer.title }}</h1>
            {% endif %}
          </div>
    
          <!-- Footer Description -->
          <p class="text-sm w-[70%] leading-loose mt-5">{{ footer.description }}</p>
    
          <!-- Social Media Links -->
          <ul class="flex flex-row gap-5 mt-5 justify-start">
            {% if footer.fb_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.fb_link }}" target="_blank">
                  <img src="{% static 'assets/fb.png' %}" alt="Facebook" />
                </a>
              </li>
            {% endif %}
            {% if footer.twitter_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.twitter_link }}" target="_blank">
                  <img src="{% static 'assets/twitter.png' %}" alt="Twitter" />
                </a>
              </li>
            {% endif %}
            {% if footer.instagram_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.instagram_link }}" target="_blank">
                  <img src="{% static 'assets/instagram.png' %}" alt="Instagram" />
                </a>
              </li>
            {% endif %}
            {% if footer.youtube_link %}
              <li class="bg-white p-3 rounded-full">
                <a href="{{ footer.youtube_link }}" target="_blank">
                  <img src="{% static 'assets/youtube.png' %}" alt="YouTube" />
                </a>
              </li>
            {% endif %}
          </ul>
        </div>
    
        <!-- Quick Links Section -->
        <div class="md:mx-auto">
          <h1 class="font-semibold text-lg md:text-3xl">Quick Links</h1>
          <ul class="mt-5 space-y-3">
            {% for link in footer_links %}
              <li class="text-base md:text-xl">
                <a href="{{ link.url }}" target="_blank">
                  <span class="text-[#59B55E] font-bold">&gt;</span> {{ link.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
    
        <!-- Right Side Section (Icons) -->
        <div class="flex flex-wrap justify-between gap-5">
          <!-- Conference Section -->
          {% for conference in video_conferences %}
          <a href="{{ conference.url }}" target="_blank">
          <div class="flex flex-col items-center justify-center w-[100px] h-[100px] p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer">
            <img src="{% static 'assets/gp1.png' %}" class="w-[40px] h-[40px]" />
            <p class="text-gray-800 text-xs md:text-sm text-center font-semibold mt-2">Conference</p>
          </div>
        </a>
        {% endfor %}
    
          <!-- Appointment Section -->
          <div class="flex flex-col items-center justify-center w-[100px] h-[100px] p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer" onclick="openAppointmentPopup()">
            <img src="{% static 'assets/gp2.png' %}" class="w-[40px] h-[40px]" />
            <p class="text-gray-800 text-xs md:text-sm text-center font-semibold mt-2">Fix an appointment</p>
          </div>
    
          <!-- Call Section -->
          <a href="tel:{{ contact_us.phone_number }}">
          <div class="flex flex-col items-center justify-center w-[100px] h-[100px] p-6 bg-green-50 rounded-lg shadow-lg cursor-pointer">
            <img src="{% static 'assets/gp3.png' %}" class="w-[40px] h-[40px]" />
            <p class="text-gray-800 text-xs md:text-sm text-center font-semibold mt-2">Call Us</p>
          </div>
          </a>
        </div>
      </div>
    
      <!-- Footer Bottom Section -->
      <hr class="border-gray-600 border-t-2 mt-5 mb-3 w-full" />
      <p class="text-center mx-auto">&copy; 2025 All rights reserved</p>
    </footer>
    
    <script>
      function openAppointmentPopup() {
        document.getElementById("appointment-popup").classList.remove("hidden");
      }
    
      function closeAppointmentPopup(event) {
        const popup = document.getElementById("appointment-popup");
        if (!event || event.target === popup) {
          popup.classList.add("hidden");
        }
      }
    </script>
    
    <!-- Popup Modal for Appointment -->
    <div id="appointment-popup" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" onclick="closeAppointmentPopup(event)">
      <div class="bg-white mt-6 p-6 rounded-lg shadow-lg w-10/12 max-w-sm" onclick="event.stopPropagation()">
        <form method="POST" action="{% url 'submit_appointment' %}">
          <h2 class="text-black text-lg font-semibold mb-3">Get your Appointment</h2>
          {% csrf_token %}
          <div class="mb-3">
            <label for="name" class="block text-gray-700 text-sm">Name</label>
            <input type="text" id="name" name="name" class="text-black w-full border border-gray-300 p-2 rounded text-sm" required />
          </div>
          <div class="mb-3">
            <label for="calendar" class="block text-gray-700 text-sm">Date and Time</label>
            <input type="datetime-local" id="calendar" name="calendar" class="text-black w-full border border-gray-300 p-2 rounded text-sm" required />
          </div>
          <div class="mb-3">
            <label for="phone_number" class="block text-gray-700 text-sm">Phone Number</label>
            <input type="tel" id="phone_number" name="phone_number" class="text-black w-full border border-gray-300 p-2 rounded text-sm" required />
          </div>
          <div class="mb-3">
            <label for="email" class="block text-gray-700 text-sm">Email (optional)</label>
            <input type="email" id="email" name="email" class="text-black w-full border border-gray-300 p-2 rounded text-sm" />
          </div>
          <div class="mb-3">
            <label for="short_message" class="block text-gray-700 text-sm">Short Message</label>
            <textarea id="short_message" name="short_message" class="text-black w-full border border-gray-300 p-2 rounded text-sm"></textarea>
          </div>
          <div class="flex justify-between mt-4">
            <button type="button" onclick="closeAppointmentPopup()" class="bg-red-500 text-white px-3 py-2 rounded text-sm">Cancel</button>
            <button type="submit" class="bg-green-500 text-white px-3 py-2 rounded text-sm">Submit</button>
          </div>
        </form>
      </div>
    </div>
    
    
    

    <!-- Custom Scripts -->


    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
      const menuToggle = document.getElementById("menu-toggle");
      const menuClose = document.getElementById("menu-close");
      const menuDrawer = document.getElementById("menu-drawer");
      const menuOverlay = document.getElementById("menu-overlay");
      const navbar = document.getElementById("navbar");

      // Adjust drawer position below the navbar
      const adjustDrawerPosition = () => {
        const navbarHeight = navbar.offsetHeight;
        menuDrawer.style.top = `${navbarHeight}px`;
      };

      window.addEventListener("resize", adjustDrawerPosition);
      window.addEventListener("load", adjustDrawerPosition);

      // Open Drawer
      menuToggle.addEventListener("click", () => {
        menuDrawer.classList.remove("translate-x-full");
        menuOverlay.classList.remove("hidden");
      });

      // Close Drawer on Close Button or Overlay Click
      const closeDrawer = () => {
        menuDrawer.classList.add("translate-x-full");
        menuOverlay.classList.add("hidden");
      };

      menuClose.addEventListener("click", closeDrawer);
      menuOverlay.addEventListener("click", closeDrawer);

      // Handle opening the modal
      document.querySelectorAll("[data-dialog-target]").forEach((button) => {
        button.addEventListener("click", () => {
          const modalId = button.getAttribute("data-dialog-target");
          const backdrop = document.querySelector(
            `[data-dialog-backdrop="${modalId}"]`
          );
          if (backdrop) {
            backdrop.classList.remove("pointer-events-none", "opacity-0");
            backdrop.classList.add("opacity-100", "pointer-events-auto");
          }
        });
      });

      // Handle closing the modal
      document.querySelectorAll("[data-dialog-close]").forEach((button) => {
        button.addEventListener("click", () => {
          const modal = button.closest("[data-dialog-backdrop]");
          if (modal) {
            modal.classList.add("pointer-events-none", "opacity-0");
            modal.classList.remove("opacity-100", "pointer-events-auto");
          }
        });
      });

      // Close modal when clicking on the backdrop
      document
        .querySelectorAll('[data-dialog-backdrop-close="true"]')
        .forEach((backdrop) => {
          backdrop.addEventListener("click", (event) => {
            if (event.target === backdrop) {
              backdrop.classList.add("pointer-events-none", "opacity-0");
              backdrop.classList.remove("opacity-100", "pointer-events-auto");
            }
          });
        });

      // Achievement carousel
      document.addEventListener("DOMContentLoaded", () => {
        const carousel3Dswiper = new Swiper(".carousel-3D-swiper", {
          loop: true,
          effect: "coverflow",
          grabCursor: true,
          centeredSlides: true,
          slidesPerView: 4,
          coverflowEffect: {
            rotate: 0,
            stretch: 0,
            depth: 350,
            modifier: 1,
            slideShadows: true,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          autoplay: {
            delay: 2000, // Delay in milliseconds (3 seconds in this case)
            disableOnInteraction: false, // Keep autoplay even after interacting with the carousel
          },
          breakpoints: {
            0: {
              // Mobile devices
              slidesPerView: 1.5, // Show the center image bigger and part of the side images
              coverflowEffect: {
                depth: 200,
                stretch: 50, // Pull side images closer
              },
            },
            768: {
              // Tablets
              slidesPerView: 2.5,
              coverflowEffect: {
                depth: 300,
                stretch: 30,
              },
            },
            1024: {
              // Laptops and larger
              slidesPerView: 4,
              coverflowEffect: {
                depth: 350,
                stretch: 0,
              },
            },
          },
        });
      });

      // Accordion functionality for collapsing and expanding items
      document.addEventListener("DOMContentLoaded", () => {
        const accordionHeaders = document.querySelectorAll(".accordion-header");

        accordionHeaders.forEach((header) => {
          header.addEventListener("click", (event) => {
            event.stopPropagation(); // Stop propagation to avoid conflicts

            const parent = header.parentElement; // Current accordion-item
            const content = parent.querySelector(":scope > .accordion-collapse"); // Immediate accordion-collapse

            // Collapse other open accordion items
            const allAccordions = document.querySelectorAll(".accordion-item");
            allAccordions.forEach((accordion) => {
              if (accordion !== parent && accordion.classList.contains("active")) {
                const otherContent = accordion.querySelector(":scope > .accordion-collapse");
                otherContent.style.maxHeight = null; // Collapse the other accordion
                accordion.classList.remove("active"); // Remove active class from other accordion
                const icon = accordion.querySelector("i");
                if (icon) icon.classList.remove("rotate-180"); // Reset icon rotation
              }
            });

            // Toggle active state for the current accordion
            parent.classList.toggle("active");

            // Rotate icon
            const icon = header.querySelector("i");
            if (icon) icon.classList.toggle("rotate-180");

            // Expand/Collapse logic for the current accordion
            if (content.style.maxHeight) {
              content.style.maxHeight = null; // Collapse the current accordion
              collapseNestedAccordions(content); // Collapse all nested accordions
            } else {
              content.style.maxHeight = content.scrollHeight + "px"; // Expand the current accordion
            }
          });
        });

        // Function to collapse all nested accordions
        function collapseNestedAccordions(parentContent) {
          const nestedContents = parentContent.querySelectorAll(".accordion-collapse");
          nestedContents.forEach((nested) => {
            nested.style.maxHeight = null; // Collapse all nested accordions
            const nestedIcons = nested.parentElement.querySelectorAll("i.rotate-180");
            nestedIcons.forEach((icon) => icon.classList.remove("rotate-180")); // Reset icon rotation
          });
        }
      });

      function setCategoryAndSubmit(categoryId) {
        // Set the category value
        const input = document.createElement("input");
        input.type = "hidden";
        input.name = "category_level3";
        input.value = categoryId;

        // Append the input to the form and submit it
        const form = document.getElementById("filterForm");
        form.appendChild(input);
        form.submit();
      }
    </script>
    
{% endblock %}